(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["4340ad36"],{"0676":function(e,t){function a(){throw new TypeError("Invalid attempt to spread non-iterable instance")}e.exports=a},"11b0":function(e,t){function a(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}e.exports=a},2236:function(e,t){function a(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}e.exports=a},"448a":function(e,t,a){var o=a("2236"),n=a("11b0"),r=a("0676");function i(e){return o(e)||n(e)||r()}e.exports=i},7222:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{staticClass:"q-pa-md"},[a("q-card",{staticClass:"col-md-6 col-xs-12",attrs:{flat:""}},[a("q-card-section",[a("div",{staticClass:"text-h6"},[e._v("Boletos Cadastrados")]),a("div",{staticClass:"text-subtitle2"})]),a("q-card-section",[a("q-table",{attrs:{data:e.data,"row-key":"id",columns:e.columns,pagination:e.pagination,loading:e.loading,filter:e.filter,"binary-state-sort":"","rows-per-page-options":[5,10,20,50,100,0],"rows-per-page-label":"Registros por página:"},on:{"update:pagination":function(t){e.pagination=t},request:e.onRequest},scopedSlots:e._u([{key:"top-right",fn:function(){return[a("q-input",{attrs:{dense:"",debounce:"300",placeholder:"Procurar"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0},{key:"body",fn:function(t){return[a("q-tr",{attrs:{props:t}},[a("q-td",{key:"id",attrs:{props:t}},[e._v(e._s(t.row.id))]),a("q-td",{key:"document_number",attrs:{props:t}},[e._v("\n              "+e._s(t.row.document_number)+"\n              "),a("q-btn",{attrs:{dense:"",round:"",flat:"",icon:t.expand?"arrow_drop_up":"arrow_drop_down"},on:{click:function(e){t.expand=!t.expand}}})],1),a("q-td",{key:"due_date",attrs:{props:t}},[e._v(e._s(e.formatDate(t.row.due_date)))]),a("q-td",{key:"created_at",attrs:{props:t}},[e._v(e._s(e.formatDateTime(t.row.created_at)))]),a("q-td",{key:"condition",attrs:{props:t},domProps:{innerHTML:e._s(e.status(t.row.condition,!0))}}),a("q-td",{attrs:{"auto-width":""}},[a("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"more_vert"}},[a("q-menu",{attrs:{fit:""}},[a("q-list",{staticStyle:{"min-width":"100px"}},[e.can("pay_billet")&&"actived"!==t.row.condition?a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},nativeOn:{click:function(a){return e.onConfirmPay(t.row)}}},[a("q-item-section",{attrs:{avatar:""}},[a("q-avatar",{attrs:{icon:"local_atm",color:"primary","text-color":"white"}})],1),a("q-item-section",[e._v("Validar pagamento")])],1):e._e(),e.can("view_billet")?a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:"",tag:"a",target:"_blank",href:"https://saldo.ellalves.net.br/boleto/"+t.row.id}},[a("q-item-section",{attrs:{avatar:""}},[a("q-avatar",{attrs:{icon:"pageview",color:"info","text-color":"white"}})],1),a("q-item-section",[e._v("\n                          Visualizar\n                      ")])],1):e._e(),e.can("delete_user")&&"actived"!=t.row.condition?a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},nativeOn:{click:function(a){return e.onConfirmDelete(t.row)}}},[a("q-item-section",{attrs:{avatar:""}},[a("q-avatar",{attrs:{icon:"delete_outline",color:"negative","text-color":"white"}})],1),a("q-item-section",[e._v("Apagar")])],1):e._e()],1)],1)],1)],1)],1),a("q-tr",{directives:[{name:"show",rawName:"v-show",value:t.expand,expression:"props.expand"}],attrs:{props:t}},[a("q-td",{attrs:{colspan:"100%"}},[a("div",{staticClass:"text-left"},[a("strong",[e._v("Valor:")]),e._v(" "+e._s(e.formatPrice(t.row.price))+" "),a("br"),a("strong",[e._v("Usuário:")]),e._v(" "+e._s(t.row.user.name)+" "),a("br"),a("strong",[e._v("Telefone:")]),e._v(" "+e._s(t.row.phone)+" "+e._s(t.row.celular?"/ "+t.row.celular:"")+" "),a("br")])])],1)]}}])})],1)],1),a("q-dialog",{attrs:{persistent:""},model:{value:e.confirmPay,callback:function(t){e.confirmPay=t},expression:"confirmPay"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center"},[a("q-avatar",{attrs:{icon:"block",color:"negative","text-color":"white"}}),a("span",{staticClass:"q-ml-sm"},[e._v("Tem certeza que quer validar esse pagamento?  ")])],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancelar",color:"warning"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Confirmar",color:"positive"},nativeOn:{click:function(t){return e.onPay(t)}}})],1)],1)],1),a("q-dialog",{attrs:{persistent:""},model:{value:e.deleteTicket,callback:function(t){e.deleteTicket=t},expression:"deleteTicket"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center"},[a("q-avatar",{attrs:{icon:"block",color:"negative","text-color":"white"}}),a("span",{staticClass:"q-ml-sm"},[e._v("Tem certeza que quer deletar esse boleto?  ")])],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancelar",color:"warning"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Confirmar",color:"positive"},nativeOn:{click:function(t){return e.onDelete(t)}}})],1)],1)],1)],1)},n=[],r=(a("ac6a"),a("55dd"),a("7f7f"),a("6762"),a("2fdb"),a("448a")),i=a.n(r),s=(a("097d"),a("3156")),c=a.n(s),l=a("2f62"),d=a("887e"),p=a("7ecf"),u={name:"Tickets",data:function(){return{propsTicket:{},confirmPay:!1,deleteTicket:!1,filter:"",loading:!1,selected:[],pagination:{sortBy:"condition",descending:!0,page:1,rowsPerPage:20,rowsNumber:10},columns:[{name:"id",align:"center",label:"#",field:"id",sortable:!0},{name:"document_number",align:"left",label:"Número",field:"document_number",sortable:!0},{name:"due_date",label:"Validade",field:"due_date",sortable:!0},{name:"created_at",label:"Criado em",field:"created_at",sortable:!0},{name:"condition",label:"Condição",field:"condition",sortable:!0},{label:"Ações",field:"condition"}],data:[],original:[]}},mounted:function(){this.onRequest({pagination:this.pagination,filter:void 0})},computed:c()({},Object(l["d"])("auth",["me"]),Object(l["d"])("tickets",["tickets"]),{params:function(){return{page:this.tickets.current_page,per_page:this.pagination.rowsPerPage,filter:this.filter,column:this.pagination.sortBy,order:"desc"}}}),methods:c()({onConfirmPay:function(e){this.confirmPay=!0,this.propsTicket=e},onConfirmDelete:function(e){this.deleteTicket=!0,this.propsTicket=e}},Object(l["b"])("tickets",["payTicket"]),{onPay:function(){var e=this;this.confirmPay&&this.payTicket({id:this.propsTicket.id,payer:this.propsTicket.payer}).then(function(t){e.onRequest({pagination:e.pagination,filter:void 0}),e.$q.notify({message:"Pagamento confirmado!",color:"green-10",position:"center",icon:"done_outline",timeout:5e3*Math.random()+3e3})}).catch(function(){e.$q.notify({message:"Oooops! Ocorreu um erro inesperado.",color:"red-10",position:"center",icon:"error_outline",timeout:5e3*Math.random()+3e3})})}},Object(l["b"])("tickets",["destroyTicket"]),{onDelete:function(e){var t=this;this.destroyTicket({id:this.propsTicket.id}).then(function(e){t.onRequest({pagination:t.pagination,filter:void 0}),t.$q.notify({message:"Boleto deletado!",color:"green-10",position:"center",icon:"done_outline",timeout:5e3*Math.random()+3e3})}).catch(function(){t.$q.notify({message:"Oooops! Ocorreu um erro inesperado.",color:"red-10",position:"center",icon:"error_outline",timeout:5e3*Math.random()+3e3})})}},Object(l["b"])("tickets",["loadTickets"]),{onRequest:function(e){var t=this,a=e.pagination,o=a.page,n=a.rowsPerPage,r=a.rowsNumber,s=a.sortBy,l=a.descending,d=e.filter;this.loading=!0,this.pagination.rowsPerPage=0===n?r:n;var p=this.pagination.rowsPerPage,u=(o-1)*n;this.pagination.page=o,this.pagination.sortBy=s,this.pagination.descending=l,this.loadTickets(c()({},this.params,{page:o})).then(function(e){var a;t.original=e.data,t.pagination.rowsNumber=t.getRowsNumberCount(d,e.total);var o=t.fetchFromServer(u,p,d,s,l);(a=t.data).splice.apply(a,[0,t.data.length].concat(i()(o)))}).finally(function(){t.loading=!1})},fetchFromServer:function(e,t,a,o,n){var r=[];if(a)for(var i=0,s=e,c=0;s<this.original.length&&c<t;++s){var l=this.original[s];l["name"].includes(a)&&(++i,i>e&&(r.push(l),++c))}else r=this.original;return o&&r.sort(function(e,t){var a=n?t:e,r=n?e:t;return"name"===o?a[o]>r[o]?1:a[o]<r[o]?-1:0:parseFloat(a[o])-parseFloat(r[o])}),r},getRowsNumberCount:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e?(this.original.forEach(function(a){a["name"].includes(e)&&++t}),t):t}}),mixins:[d["a"],p["a"]]},m=u,f=a("2877"),g=Object(f["a"])(m,o,n,!1,null,null,null);t["default"]=g.exports},"7ecf":function(e,t,a){"use strict";a.d(t,"a",function(){return r});var o=a("c1df"),n=a.n(o),r={methods:{formatDateTime:function(e){return n()(e).format("DD/MM/YYYY HH:mm")},formatDate:function(e){return n()(e).format("DD/MM/YYYY")},formatTime:function(e){return n()(e).format("HH:mm")}}}},"887e":function(e,t,a){"use strict";a.d(t,"a",function(){return o});a("6b54"),a("a481"),a("28a5"),a("ac6a");var o={methods:{wordWrapToStringList:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=[],o=[],n=0;return e.split(" ").forEach(function(e){n+e.length>=t&&(a.push(o.join(" ")),o=[],n=0),n+=e.length+1,o.push(e)}),o.length>0&&a.push(o.join(" ")),a},formatPrice:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=(e/1).toFixed(2).replace(".",",");return t+" "+a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},formatSex:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=[];if(a["male"]="Masculino",a["female"]="Feminino",a["other"]="Outro",!e)return a;var o="",n="";switch(e){case"male":o=a["male"],n="primary";break;case"female":o=a["female"],n="secondary";break;case"other":o=a["other"],n="warning";break}return t?"<q-badge square color='".concat(n,"'>").concat(o,"</q-badge>"):o},status:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=[];if(a["actived"]="Ativo",a["inactived"]="Inativo",a["pending"]="Pendente",a["deleted"]="Deletado",!e)return a;var o="",n="";switch(e){case"actived":o=a["actived"],n="primary";break;case"inactived":o=a["inactived"],n="secondary";break;case"pending":o=a["pending"],n="warning";break;case"deleted":o=a["deleted"],n="danger";break}return t?"<q-badge square color='".concat(n,"'>").concat(o,"</q-badge>"):o}}}}}]);