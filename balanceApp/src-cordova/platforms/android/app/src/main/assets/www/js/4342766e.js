(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["4342766e"],{"0676":function(e,t){function o(){throw new TypeError("Invalid attempt to spread non-iterable instance")}e.exports=o},"11b0":function(e,t){function o(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}e.exports=o},2236:function(e,t){function o(e){if(Array.isArray(e)){for(var t=0,o=new Array(e.length);t<e.length;t++)o[t]=e[t];return o}}e.exports=o},"448a":function(e,t,o){var i=o("2236"),a=o("11b0"),n=o("0676");function r(e){return i(e)||a(e)||n()}e.exports=r},5356:function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("q-page",{staticClass:"row"},[o("q-card",{staticClass:"col-12"},[o("q-card-section",[o("div",{staticClass:"text-h6"},[e._v("Funções Cadastradas")]),o("div",{staticClass:"text-subtitle2"})]),o("q-card-section",[o("q-table",{attrs:{data:e.data,"row-key":"id",columns:e.columns,pagination:e.pagination,loading:e.loading,filter:e.filter,"binary-state-sort":"","rows-per-page-options":[5,10,20,50,100,0],"rows-per-page-label":"Registros por página:"},on:{"update:pagination":function(t){e.pagination=t},request:e.onRequest},scopedSlots:e._u([{key:"top",fn:function(){return[o("q-btn",{attrs:{icon:"supervised_user_circle",color:"primary",disable:e.loading,label:"Adicionar função"},on:{click:function(t){e.mRoles=!0}}}),o("q-space"),o("q-input",{attrs:{dense:"",debounce:"300",placeholder:"Procurar"},scopedSlots:e._u([{key:"append",fn:function(){return[o("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0},{key:"body",fn:function(t){return[o("q-tr",{attrs:{props:t}},[o("q-td",{key:"id",attrs:{props:t}},[e._v(e._s(t.row.id))]),o("q-td",{key:"label",attrs:{props:t}},[e._v("\n              "+e._s(t.row.label)+"\n              "),e.can("edit_role")?o("q-popup-edit",{attrs:{buttons:"","label-set":"Salvar","label-cancel":"Fechar"},on:{save:function(o){return e.saveRole(t.row)}},model:{value:t.row.label,callback:function(o){e.$set(t.row,"label",o)},expression:"props.row.label"}},[o("q-input",{attrs:{hint:"Campo obrigatório!",error:e.errorRole,"error-message":e.errorMessageRole,dense:"",autofocus:""},model:{value:t.row.label,callback:function(o){e.$set(t.row,"label",o)},expression:"props.row.label"}})],1):e._e(),o("q-tooltip",{attrs:{anchor:"center left",self:"center left"}},[e._v(" Clique para editar")])],1),o("q-td",{key:"actions",attrs:{"auto-width":""}},[o("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"more_vert"}},[o("q-menu",{attrs:{fit:""}},[o("q-list",[e.can("associate_permissions")?o("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},nativeOn:{click:function(o){return e.getPermissions(t.row)}}},[o("q-item-section",{attrs:{avatar:""}},[o("q-avatar",{attrs:{icon:"lock",color:"primary","text-color":"white"}})],1),o("q-item-section",[e._v("Permissões")])],1):e._e(),e.can("view_role")?o("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""}},[o("q-item-section",{attrs:{avatar:""}},[o("q-avatar",{attrs:{icon:t.expand?"visibility":"visibility_off",color:"secondary","text-color":"white"}})],1),o("q-item-section",{on:{click:function(e){t.expand=!t.expand}}},[e._v("\n                        Detalhes\n                      ")])],1):e._e()],1)],1)],1)],1)],1),o("q-tr",{directives:[{name:"show",rawName:"v-show",value:t.expand,expression:"props.expand"}],attrs:{props:t}},[o("q-td",{attrs:{colspan:"100%"}},[o("div",{staticClass:"text-left"},[o("strong",[e._v("Nome:")]),e._v(" "+e._s(t.row.name)+" "),o("br"),o("strong",[e._v("Criado em:")]),e._v(" "+e._s(e.formatDateTime(t.row.created_at))+" "),o("br"),t.row.updated_at?o("span",[o("strong",[e._v("Atualizado em:")]),e._v(" "+e._s(e.formatDateTime(t.row.updated_at))+" "),o("br")]):e._e()])])],1)]}}])})],1)],1),e.can("associate_permissions")?o("q-dialog",{attrs:{persistent:"",maximized:e.maximizedToggle,"transition-show":"slide-up","transition-hide":"slide-down"},model:{value:e.mPermissions,callback:function(t){e.mPermissions=t},expression:"mPermissions"}},[o("q-card",[o("q-bar",[o("div",{staticClass:"text-h6"},[e._v("Função: "+e._s(e.getRole.label))]),o("q-space"),o("q-btn",{attrs:{dense:"",flat:"",icon:"minimize",disable:!e.maximizedToggle},on:{click:function(t){e.maximizedToggle=!1}}},[e.maximizedToggle?o("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[e._v("Minimizar")]):e._e()],1),o("q-btn",{attrs:{dense:"",flat:"",icon:"crop_square",disable:e.maximizedToggle},on:{click:function(t){e.maximizedToggle=!0}}},[e.maximizedToggle?e._e():o("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[e._v("Maximizar")])],1),o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}},[o("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[e._v("Fechar")])],1)],1),o("q-card-section",{staticClass:"q-pa-md"},[o("div",{staticClass:"q-gutter-sm"},[o("q-option-group",{attrs:{options:e.optPermissions,"checked-icon":"check",type:"toggle",inline:""},model:{value:e.optPermSel,callback:function(t){e.optPermSel=t},expression:"optPermSel"}})],1),o("q-separator"),o("q-card-actions",{staticClass:"float-right"},[o("q-btn",{attrs:{icon:"save",color:"positive",label:"Salvar"},nativeOn:{click:function(t){return e.savePermissions(e.getRole)}}})],1)],1)],1)],1):e._e(),e.can("add_role")?o("q-dialog",{attrs:{persistent:"",maximized:e.maximizedToggle,"transition-show":"slide-up","transition-hide":"slide-down"},model:{value:e.mRoles,callback:function(t){e.mRoles=t},expression:"mRoles"}},[o("q-card",[o("q-bar",[o("div",{staticClass:"text-h6"},[e._v("Adicionar Função")]),o("q-space"),o("q-btn",{attrs:{dense:"",flat:"",icon:"minimize",disable:!e.maximizedToggle},on:{click:function(t){e.maximizedToggle=!1}}},[e.maximizedToggle?o("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[e._v("Minimizar")]):e._e()],1),o("q-btn",{attrs:{dense:"",flat:"",icon:"crop_square",disable:e.maximizedToggle},on:{click:function(t){e.maximizedToggle=!0}}},[e.maximizedToggle?e._e():o("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[e._v("Maximizar")])],1),o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}},[o("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[e._v("Fechar")])],1)],1),o("q-card-section",{staticClass:"q-pa-md"},[o("q-input",{attrs:{label:"Nome"},model:{value:e.role.name,callback:function(t){e.$set(e.role,"name",t)},expression:"role.name"}}),o("q-input",{attrs:{label:"Etiqueta"},model:{value:e.role.label,callback:function(t){e.$set(e.role,"label",t)},expression:"role.label"}}),o("q-separator"),o("q-card-actions",{staticClass:"float-right"},[o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"save",color:"positive",label:"Salvar"},nativeOn:{click:function(t){return e.addFunction(t)}}})],1)],1)],1)],1):e._e()],1)},a=[],n=(o("ac6a"),o("55dd"),o("7f7f"),o("6762"),o("2fdb"),o("448a")),r=o.n(n),s=(o("097d"),o("3156")),l=o.n(s),c=o("2f62"),d=o("887e"),p=o("7ecf"),u={name:"Roles",data:function(){return{role:{},errorRole:!1,errorMessageRole:"",getRole:["aguarde ..."],maximizedToggle:!0,optPermSel:[],optPermissions:[],mPermissions:!1,mRoles:!1,filter:"",loading:!1,pagination:{sortBy:"id",descending:!0,page:1,rowsPerPage:20,rowsNumber:10},columns:[{name:"id",align:"left",label:"#",field:"id",sortable:!0},{name:"label",align:"left",label:"Etiqueta",field:"label",sortable:!0},{name:"actions",label:"Ações",align:"center",field:"",sortable:!1}],data:[],original:[]}},mounted:function(){this.onRequest({pagination:this.pagination,filter:void 0})},computed:l()({},Object(c["d"])("auth",["me"]),{params:function(){return{page:this.original.current_page,per_page:this.pagination.rowsPerPage,filter:this.filter,column:this.pagination.sortBy,order:"asc"}}}),methods:l()({},Object(c["b"])("roles",["addRole"]),{addFunction:function(){var e=this;this.addRole(this.role).then(function(t){e.$q.notify({message:t.message,color:"green-10",position:"center",icon:"done_outline"}),e.onRequest({pagination:e.pagination,filter:void 0})}).catch(function(){e.$q.notify({message:"Oooops! Ocorreu um erro inesperado.",color:"red-10",position:"center",icon:"error_outline",timeout:5e3*Math.random()+3e3})})}},Object(c["b"])("roles",["updateRole"]),{saveRole:function(e){var t=this;e&&this.updateRole(e).then(function(e){t.$q.notify({message:e.message,color:"green-10",position:"center",icon:"done_outline"})}).catch(function(){t.$q.notify({message:"Oooops! Ocorreu um erro inesperado.",color:"red-10",position:"center",icon:"error_outline",timeout:5e3*Math.random()+3e3})})},validateRole:function(e){return""!==e||void 0!==e?(this.errorRole=!0,this.errorMessageRole="Deu erro!",!1):(this.errorRole=!1,this.errorMessageRole="",!0)}},Object(c["b"])("roles",["rolePermissions"]),{getPermissions:function(e){var t=this;this.checkOptions(null),this.mPermissions=!0,this.rolePermissions({id:e.id}).then(function(o){t.getRole=e,t.optPermSel=o.map(function(e){return e.id})}).catch(function(e){return e})}},Object(c["b"])("permissions",["optionsPermissions"]),{checkOptions:function(e){var t=this;this.optionsPermissions({q:e}).then(function(e){t.optPermissions=e.map(function(e){return{label:e.label,value:e.id}})})}},Object(c["b"])("permissions",["saveRolePermissions"]),{savePermissions:function(e){var t=this;this.saveRolePermissions({role:e.id,permissions:this.optPermSel}).then(function(e){t.$q.notify({message:e.message,color:"green-10",position:"center",icon:"done_outline"})}).catch(function(){t.$q.notify({message:"Oooops! Ocorreu um erro inesperado.",color:"red-10",position:"center",icon:"error_outline",timeout:5e3*Math.random()+3e3})})}},Object(c["b"])("roles",["loadRoles"]),{onRequest:function(e){var t=this,o=e.pagination,i=o.page,a=o.rowsPerPage,n=o.rowsNumber,s=o.sortBy,c=o.descending,d=e.filter;this.loading=!0,this.pagination.rowsPerPage=0===a?n:a;var p=this.pagination.rowsPerPage,u=(i-1)*a;this.pagination.page=i,this.pagination.sortBy=s,this.pagination.descending=c,this.loadRoles(l()({},this.params,{page:i})).then(function(e){var o;t.original=e.data,t.pagination.rowsNumber=t.getRowsNumberCount(d,e.total);var i=t.fetchFromServer(u,p,d,s,c);(o=t.data).splice.apply(o,[0,t.data.length].concat(r()(i)))}).finally(function(){t.loading=!1})},fetchFromServer:function(e,t,o,i,a){var n=[];if(o)for(var r=0,s=e,l=0;s<this.original.length&&l<t;++s){var c=this.original[s];c["name"].includes(o)&&(++r,r>e&&(n.push(c),++l))}else n=this.original;return i&&n.sort(function(e,t){var o=a?t:e,n=a?e:t;return"name"===i?o[i]>n[i]?1:o[i]<n[i]?-1:0:parseFloat(o[i])-parseFloat(n[i])}),n},getRowsNumberCount:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e?(this.original.forEach(function(o){o["name"].includes(e)&&++t}),t):t}}),mixins:[d["a"],p["a"]]},m=u,g=o("2877"),f=Object(g["a"])(m,i,a,!1,null,null,null);t["default"]=f.exports},"7ecf":function(e,t,o){"use strict";o.d(t,"a",function(){return n});var i=o("c1df"),a=o.n(i),n={methods:{formatDateTime:function(e){return a()(e).format("DD/MM/YYYY HH:mm")},formatDate:function(e){return a()(e).format("DD/MM/YYYY")},formatTime:function(e){return a()(e).format("HH:mm")}}}},"887e":function(e,t,o){"use strict";o.d(t,"a",function(){return i});o("6b54"),o("a481"),o("28a5"),o("ac6a");var i={methods:{wordWrapToStringList:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,o=[],i=[],a=0;return e.split(" ").forEach(function(e){a+e.length>=t&&(o.push(i.join(" ")),i=[],a=0),a+=e.length+1,i.push(e)}),i.length>0&&o.push(i.join(" ")),o},formatPrice:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=(e/1).toFixed(2).replace(".",",");return t+" "+o.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},formatSex:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=[];if(o["male"]="Masculino",o["female"]="Feminino",o["other"]="Outro",!e)return o;var i="",a="";switch(e){case"male":i=o["male"],a="primary";break;case"female":i=o["female"],a="secondary";break;case"other":i=o["other"],a="warning";break}return t?"<q-badge square color='".concat(a,"'>").concat(i,"</q-badge>"):i},status:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=[];if(o["actived"]="Ativo",o["inactived"]="Inativo",o["pending"]="Pendente",o["deleted"]="Deletado",!e)return o;var i="",a="";switch(e){case"actived":i=o["actived"],a="primary";break;case"inactived":i=o["inactived"],a="secondary";break;case"pending":i=o["pending"],a="warning";break;case"deleted":i=o["deleted"],a="danger";break}return t?"<q-badge square color='".concat(a,"'>").concat(i,"</q-badge>"):i}}}}}]);