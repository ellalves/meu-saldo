(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["434711ea"],{"0122":function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-page",{staticClass:"row"},[i("q-card",{staticClass:"col-12"},[i("q-card-section",[i("div",{staticClass:"text-h6"},[e._v("Permissões Cadastradas")]),i("div",{staticClass:"text-subtitle2"})]),i("q-card-section",[i("q-table",{attrs:{data:e.data,"row-key":"id",columns:e.columns,pagination:e.pagination,loading:e.loading,filter:e.filter,"binary-state-sort":"","rows-per-page-options":[5,10,20,50,100,0],"rows-per-page-label":"Registros por página:"},on:{"update:pagination":function(t){e.pagination=t},request:e.onRequest},scopedSlots:e._u([{key:"top",fn:function(){return[i("q-btn",{attrs:{icon:"lock",color:"primary",disable:e.loading,label:"Adicionar permissão"},on:{click:function(t){e.mPermissions=!0}}}),i("q-space"),i("q-input",{attrs:{dense:"",debounce:"300",placeholder:"Procurar"},scopedSlots:e._u([{key:"append",fn:function(){return[i("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0},{key:"body",fn:function(t){return[i("q-tr",{attrs:{props:t}},[i("q-td",{key:"id",attrs:{props:t}},[e._v(e._s(t.row.id))]),i("q-td",{key:"label",attrs:{props:t}},[e._v("\n              "+e._s(t.row.label)+"\n              "),e.can("edit_role")?i("q-popup-edit",{attrs:{buttons:"","label-set":"Salvar","label-cancel":"Fechar",persistent:""},on:{save:function(i){return e.savePermission(t.row)}},model:{value:t.row.label,callback:function(i){e.$set(t.row,"label",i)},expression:"props.row.label"}},[i("q-input",{attrs:{hint:"Campo obrigatório!",error:e.errorPermission,"error-message":e.errorMessagePermission,dense:"",autofocus:""},model:{value:t.row.label,callback:function(i){e.$set(t.row,"label",i)},expression:"props.row.label"}})],1):e._e()],1),i("q-td",{key:"actions",attrs:{"auto-width":""}},[i("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"more_vert"}},[i("q-menu",{attrs:{fit:""}},[i("q-list",[e.can("associate_roles")?i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},nativeOn:{click:function(i){return e.getPermissions(t.row)}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-avatar",{attrs:{icon:"supervised_user_circle",color:"primary","text-color":"white"}})],1),i("q-item-section",[e._v("Funções")])],1):e._e(),e.can("view_permission")?i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""}},[i("q-item-section",{attrs:{avatar:""}},[i("q-avatar",{attrs:{icon:t.expand?"visibility":"visibility_off",color:"primary","text-color":"white"}})],1),i("q-item-section",{on:{click:function(e){t.expand=!t.expand}}},[e._v("\n                        Detalhes\n                      ")])],1):e._e()],1)],1)],1)],1)],1),i("q-tr",{directives:[{name:"show",rawName:"v-show",value:t.expand,expression:"props.expand"}],attrs:{props:t}},[i("q-td",{attrs:{colspan:"100%"}},[i("div",{staticClass:"text-left"},[i("strong",[e._v("Nome:")]),e._v(" "+e._s(t.row.name)+" "),i("br"),i("strong",[e._v("Criado em:")]),e._v(" "+e._s(e.formatDateTime(t.row.created_at))+" "),i("br"),t.row.updated_at?i("span",[i("strong",[e._v("Atualizado em:")]),e._v(" "+e._s(e.formatDateTime(t.row.updated_at))+" "),i("br")]):e._e()])])],1)]}}])})],1)],1),e.can("associate_roles")?i("q-dialog",{attrs:{persistent:"",maximized:e.maximizedToggle,"transition-show":"slide-up","transition-hide":"slide-down"},model:{value:e.mRoles,callback:function(t){e.mRoles=t},expression:"mRoles"}},[i("q-card",[i("q-bar",[i("div",{staticClass:"text-h6"},[e._v("Função: "+e._s(e.getPermission.label))]),i("q-space"),i("q-btn",{attrs:{dense:"",flat:"",icon:"minimize",disable:!e.maximizedToggle},on:{click:function(t){e.maximizedToggle=!1}}},[e.maximizedToggle?i("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[e._v("Minimizar")]):e._e()],1),i("q-btn",{attrs:{dense:"",flat:"",icon:"crop_square",disable:e.maximizedToggle},on:{click:function(t){e.maximizedToggle=!0}}},[e.maximizedToggle?e._e():i("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[e._v("Maximizar")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}},[i("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[e._v("Fechar")])],1)],1),i("q-card-section",{staticClass:"q-pa-md"},[i("div",{staticClass:"q-gutter-sm"},[i("q-option-group",{attrs:{options:e.optRoles,"checked-icon":"check",type:"toggle",inline:""},model:{value:e.optRoleSel,callback:function(t){e.optRoleSel=t},expression:"optRoleSel"}})],1),i("q-separator"),i("q-card-actions",{staticClass:"float-right"},[i("q-btn",{attrs:{icon:"save",color:"positive",label:"Salvar"},nativeOn:{click:function(t){return e.savePermissions(e.getPermission)}}})],1)],1)],1)],1):e._e(),e.can("add_permission")?i("q-dialog",{attrs:{persistent:"",maximized:e.maximizedToggle,"transition-show":"slide-up","transition-hide":"slide-down"},model:{value:e.mPermissions,callback:function(t){e.mPermissions=t},expression:"mPermissions"}},[i("q-card",[i("q-bar",[i("div",{staticClass:"text-h6"},[e._v("Adicionar Permissão")]),i("q-space"),i("q-btn",{attrs:{dense:"",flat:"",icon:"minimize",disable:!e.maximizedToggle},on:{click:function(t){e.maximizedToggle=!1}}},[e.maximizedToggle?i("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[e._v("Minimizar")]):e._e()],1),i("q-btn",{attrs:{dense:"",flat:"",icon:"crop_square",disable:e.maximizedToggle},on:{click:function(t){e.maximizedToggle=!0}}},[e.maximizedToggle?e._e():i("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[e._v("Maximizar")])],1),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}},[i("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[e._v("Fechar")])],1)],1),i("q-card-section",{staticClass:"q-pa-md"},[i("q-input",{attrs:{label:"Nome"},model:{value:e.role.name,callback:function(t){e.$set(e.role,"name",t)},expression:"role.name"}}),i("q-input",{attrs:{label:"Etiqueta"},model:{value:e.role.label,callback:function(t){e.$set(e.role,"label",t)},expression:"role.label"}}),i("q-separator"),i("q-card-actions",{staticClass:"float-right"},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"save",color:"positive",label:"Salvar"},nativeOn:{click:function(t){return e.addFunction(t)}}})],1)],1)],1)],1):e._e()],1)},a=[],n=(i("ac6a"),i("55dd"),i("7f7f"),i("6762"),i("2fdb"),i("448a")),r=i.n(n),s=(i("097d"),i("3156")),l=i.n(s),c=i("2f62"),m=i("887e"),p=i("7ecf"),d={name:"Permissions",data:function(){return{role:{},errorPermission:!1,errorMessagePermission:"",getPermission:["aguarde ..."],maximizedToggle:!0,optRoleSel:[],optRoles:[],mRoles:!1,mPermissions:!1,filter:"",loading:!1,pagination:{sortBy:"id",descending:!0,page:1,rowsPerPage:20,rowsNumber:10},columns:[{name:"id",align:"left",label:"#",field:"id",sortable:!0},{name:"label",align:"left",label:"Etiqueta",field:"label",sortable:!0},{name:"actions",label:"Ações",align:"center",field:"",sortable:!1}],data:[],original:[]}},mounted:function(){this.onRequest({pagination:this.pagination,filter:void 0})},computed:l()({},Object(c["d"])("auth",["me"]),{params:function(){return{page:this.original.current_page,per_page:this.pagination.rowsPerPage,filter:this.filter,column:this.pagination.sortBy,order:"asc"}}}),methods:l()({},Object(c["b"])("permissions",["addPermission"]),{addFunction:function(){var e=this;this.addPermission(this.role).then(function(t){e.$q.notify({message:t.message,color:"green-10",position:"center",icon:"done_outline"}),e.onRequest({pagination:e.pagination,filter:void 0})}).catch(function(){e.$q.notify({message:"Oooops! Ocorreu um erro inesperado.",color:"red-10",position:"center",icon:"error_outline",timeout:5e3*Math.random()+3e3})})}},Object(c["b"])("permissions",["updatePermission"]),{savePermission:function(e){var t=this;e&&this.updatePermission(e).then(function(e){t.$q.notify({message:e.message,color:"green-10",position:"center",icon:"done_outline"})}).catch(function(){t.$q.notify({message:"Oooops! Ocorreu um erro inesperado.",color:"red-10",position:"center",icon:"error_outline",timeout:5e3*Math.random()+3e3})})},validatePermission:function(e){return""!==e||void 0!==e?(this.errorPermission=!0,this.errorMessagePermission="Deu erro!",!1):(this.errorPermission=!1,this.errorMessagePermission="",!0)}},Object(c["b"])("permissions",["permissionRoles"]),{getPermissions:function(e){var t=this;this.checkOptions(null),this.mRoles=!0,this.permissionRoles({id:e.id}).then(function(i){t.getPermission=e,t.optRoleSel=i.map(function(e){return e.id})}).catch(function(e){return e})}},Object(c["b"])("roles",["optionsRoles"]),{checkOptions:function(e){var t=this;this.optionsRoles({q:e}).then(function(e){t.optRoles=e.map(function(e){return{label:e.label,value:e.id}})})}},Object(c["b"])("permissions",["savePermissionRoles"]),{savePermissions:function(e){var t=this;this.savePermissionRoles({role:e.id,permissions:this.optRoleSel}).then(function(e){t.$q.notify({message:e.message,color:"green-10",position:"center",icon:"done_outline"})}).catch(function(){t.$q.notify({message:"Oooops! Ocorreu um erro inesperado.",color:"red-10",position:"center",icon:"error_outline",timeout:5e3*Math.random()+3e3})})}},Object(c["b"])("permissions",["loadPermissions"]),{onRequest:function(e){var t=this,i=e.pagination,o=i.page,a=i.rowsPerPage,n=i.rowsNumber,s=i.sortBy,c=i.descending,m=e.filter;this.loading=!0,this.pagination.rowsPerPage=0===a?n:a;var p=this.pagination.rowsPerPage,d=(o-1)*a;this.pagination.page=o,this.pagination.sortBy=s,this.pagination.descending=c,this.loadPermissions(l()({},this.params,{page:o})).then(function(e){var i;t.original=e.data,t.pagination.rowsNumber=t.getRowsNumberCount(m,e.total);var o=t.fetchFromServer(d,p,m,s,c);(i=t.data).splice.apply(i,[0,t.data.length].concat(r()(o)))}).finally(function(){t.loading=!1})},fetchFromServer:function(e,t,i,o,a){var n=[];if(i)for(var r=0,s=e,l=0;s<this.original.length&&l<t;++s){var c=this.original[s];c["name"].includes(i)&&(++r,r>e&&(n.push(c),++l))}else n=this.original;return o&&n.sort(function(e,t){var i=a?t:e,n=a?e:t;return"name"===o?i[o]>n[o]?1:i[o]<n[o]?-1:0:parseFloat(i[o])-parseFloat(n[o])}),n},getRowsNumberCount:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e?(this.original.forEach(function(i){i["name"].includes(e)&&++t}),t):t}}),mixins:[m["a"],p["a"]]},u=d,g=i("2877"),f=Object(g["a"])(u,o,a,!1,null,null,null);t["default"]=f.exports},"0676":function(e,t){function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}e.exports=i},"11b0":function(e,t){function i(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}e.exports=i},2236:function(e,t){function i(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}e.exports=i},"448a":function(e,t,i){var o=i("2236"),a=i("11b0"),n=i("0676");function r(e){return o(e)||a(e)||n()}e.exports=r},"7ecf":function(e,t,i){"use strict";i.d(t,"a",function(){return n});var o=i("c1df"),a=i.n(o),n={methods:{formatDateTime:function(e){return a()(e).format("DD/MM/YYYY HH:mm")},formatDate:function(e){return a()(e).format("DD/MM/YYYY")},formatTime:function(e){return a()(e).format("HH:mm")}}}},"887e":function(e,t,i){"use strict";i.d(t,"a",function(){return o});i("6b54"),i("a481"),i("28a5"),i("ac6a");var o={methods:{wordWrapToStringList:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,i=[],o=[],a=0;return e.split(" ").forEach(function(e){a+e.length>=t&&(i.push(o.join(" ")),o=[],a=0),a+=e.length+1,o.push(e)}),o.length>0&&i.push(o.join(" ")),i},formatPrice:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=(e/1).toFixed(2).replace(".",",");return t+" "+i.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},formatSex:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=[];if(i["male"]="Masculino",i["female"]="Feminino",i["other"]="Outro",!e)return i;var o="",a="";switch(e){case"male":o=i["male"],a="primary";break;case"female":o=i["female"],a="secondary";break;case"other":o=i["other"],a="warning";break}return t?"<q-badge square color='".concat(a,"'>").concat(o,"</q-badge>"):o},status:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=[];if(i["actived"]="Ativo",i["inactived"]="Inativo",i["pending"]="Pendente",i["deleted"]="Deletado",!e)return i;var o="",a="";switch(e){case"actived":o=i["actived"],a="primary";break;case"inactived":o=i["inactived"],a="secondary";break;case"pending":o=i["pending"],a="warning";break;case"deleted":o=i["deleted"],a="danger";break}return t?"<q-badge square color='".concat(a,"'>").concat(o,"</q-badge>"):o}}}}}]);